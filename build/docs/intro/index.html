<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-intro">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">ESP32-based Microscopy | Matchboxscope Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://matchboxscope.github.io/docs/intro"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="ESP32-based Microscopy | Matchboxscope Documentation"><meta data-rh="true" name="description" content="This is a repository for the smallest standalone low-cost open-source DIY incubator-contained microscope that can be used for a gazilion different applications. Sounds interesting? Continue reading!"><meta data-rh="true" property="og:description" content="This is a repository for the smallest standalone low-cost open-source DIY incubator-contained microscope that can be used for a gazilion different applications. Sounds interesting? Continue reading!"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://matchboxscope.github.io/docs/intro"><link data-rh="true" rel="alternate" href="https://matchboxscope.github.io/docs/intro" hreflang="en"><link data-rh="true" rel="alternate" href="https://matchboxscope.github.io/docs/intro" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Matchboxscope Documentation RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Matchboxscope Documentation Atom Feed"><link rel="stylesheet" href="/assets/css/styles.79c44d75.css">
<link rel="preload" href="/assets/js/runtime~main.2e67f1ff.js" as="script">
<link rel="preload" href="/assets/js/main.e05a71f8.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/Artboard4@4x.png" alt="openUC2 Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/Artboard4@4x.png" alt="openUC2 Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Matchboxscope Documentation</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Tutorial</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/matchboxscope/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/ESPectrometer">ESPectrometer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Matchboxscope">Matchboxscope</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/WebSERIAL">WebSERIAL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/intro">ESP32-based Microscopy</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">ESP32-based Microscopy</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>ESP32-based Microscopy</h1><p>This is a repository for the smallest standalone low-cost open-source DIY incubator-contained microscope that can be used for a gazilion different applications. Sounds interesting? Continue reading!</p><p>The core component of this device is a ESP32 microcontroller that is packed with a small Camera (OV2460) and microSD card slot, which makes it a perfect match for your microscopy project. In the most minimal version, you don&#x27;t anything but the ESP32-CAM and perhaps some chewing gum to raise the objective lens in order to create a finite corrected microscsope.</p><p>However, we wanted to make the microscope a bit more practical and created some 3D printed parts that will realize the following devices:</p><p><strong>The Anglerfish</strong>: This device is well preserved in your beloved jars and hence watertight. Why? Throw it in your nearby pond and collect data how microfilm grows on the jars&#x27; surface. Fun! Follow the <a href="/docs/Anglerfish.md"><strong>BLUE PILL ðŸ”µ</strong></a></p><img loading="lazy" src="IMAGES/Capture.PNG" width="500" class="img_ev3q"><p><strong>The Matchboxscope</strong>: This is a simple self-contained microscope e.g. for tacking snapshots of your microfluidic chips, your parasite containing slides or just for fun. It comes with a minimum number of parts, but offers a spring-loaded z-stage. Also idea for your incubator-contained microscopy experiments! Follow the <a href="/docs/Matchboxscope"><strong>RED PILL ðŸ”´</strong></a></p><img loading="lazy" src="IMAGES/explosion.jpeg" width="500" class="img_ev3q"><p><strong>The Z-Stacker</strong>: It adds an automatic focussing unit to the <em>Matchboxscope</em> in order to create temporal Z-stacks of your beloved cell cultures. It needs more electronics, but still relies on the ESP32-CAM only. Lots of fun, too.  Follow the <a href="/docs/Matchboxscope"><strong>GREEN PILL ðŸŸ¢</strong></a></p><p>Still curious? <em>Continue Reading by clicking on individual device sub-pages!</em></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-install">How to install<a class="hash-link" href="#how-to-install" title="Direct link to heading">â€‹</a></h3><p>In order to get the code compiled and uploaded to your ESP32 camera board, a number of steps have to be carried out to prepare the system.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="compile-and-upload">Compile and Upload<a class="hash-link" href="#compile-and-upload" title="Direct link to heading">â€‹</a></h4><p>This code is written for the <code>AI_THINKER</code></p><ol><li>Download the Arduino IDE 1.8.X from <a href="https://arduino.cc/" target="_blank" rel="noopener noreferrer">here</a></li><li>Install the ESP32 IDF tool through the arduino board manager; Add the following link to the settings (a more in-depth tutorial can be found <a href="https://randomnerdtutorials.com/installing-the-esp32-board-in-arduino-ide-windows-instructions/" target="_blank" rel="noopener noreferrer">here</a>:
<code>https://raw.githubusercontent.com/espressif/arduino-esp32/gh-pages/package_esp32_dev_index.json</code>
When installing the board, go for the version <code>2.0.3</code></li><li>(<em>OBSOLTE!</em>) Install the ESP32Cam library following this <a href="https://github.com/yoursunny/esp32cam" target="_blank" rel="noopener noreferrer">link</a> and their README</li><li>Clone this repository</li><li></li></ol><ul><li><em>MatchBoxscope</em>: Choose the latest release for the MatchBoxscope, open the <code>.ino</code> and flash the project (<a href="https://github.com/beniroquai/Matchboxscope/releases/download/Matchboxscope/ESP32CAM-MatchBoxScope-MAIN.zip" target="_blank" rel="noopener noreferrer">v0.1</a>)</li><li><em>Anglerfish</em>: We will provide a ready-to-use software solution soon</li><li><em>IncubatorMicroscope</em>: We will provide a ready-to-use software solution soon</li></ul><ol start="6"><li><em>Compiling</em>: Under <code>Tools</code>select your board (<code>DEV Module</code>), <code>port</code> and enable the <code>PSRAM</code> enable 4MB external PSRAM.</li><li>Compile and Upload</li></ol><p><strong>ATTENTION for Android users:</strong> The Wifi in access point mode (<em>AP</em>) does not offer internet, hence Android uses available cellular/mobile data and won&#x27;t open the local address (<code>192.168.4.1</code>). <em>solution:</em> Switch off mobile data or disable <code>Wifi+</code></p><p><strong>WiFi settings:</strong></p><p>Please have a look in the wifi-settings to adjust them according to your network configuration:</p><p>`cpp
boolean hostWifiAP = true; // set this variable if you want the ESP32 to be the host
const char<em> mSSID = &quot;Blynk&quot;;
const char</em> mPASSWORD = &quot;12345678&quot;;
const char* mSSIDAP = &quot;Matchboxscope&quot;;
``</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="upload-files-to-spiffs">Upload files to SPIFFs<a class="hash-link" href="#upload-files-to-spiffs" title="Direct link to heading">â€‹</a></h4><p>For the <code>HTML</code> and <code>CSS</code> files, you can upload the files to</p><h1>Software</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="anglerfish-code">Anglerfish Code<a class="hash-link" href="#anglerfish-code" title="Direct link to heading">â€‹</a></h2><p>Getting many images in an autonomous &quot;diving&quot; experiment is key. For this, we wrote a firmware that enables you to find the focus and as soon as you&#x27;Re done, the microcontroller goes into deep-sleep mode to save energy. The following steps are important to carry out before your experiment.</p><p><strong>The protocol</strong></p><ol><li>Assemble unit and charge battery</li><li>Upload software and insert SD card</li><li>Then connect the battery to ESP32 and watch the camera stream via wifi and adjust the focus so that you can see the surface (of the jar) in focus. That&#x27;s what the screws and springs are for. You do this once.</li><li>Either with a switch (awkward, because you have to solder), or via Wifi (switch in Webgui/HTTP endpoint), deactivate the focus mode.</li><li>Microscope goes into deep-sleep mode and wakes up every <code>X</code> minutes to take a photo and save it on the SD card.</li></ol><p>In deep-sleep setting it consumes virtually no power.</p><p><strong>Problem/thoughts:</strong></p><ul><li>It is not possible to detect whether it is deep-sleep or disconnected from the power supply, so we built in this funny construct with the date/time of flashing the ESP32. So you can reset the EEPROM variable for focus mode (yes/no) when you (re-)flash the microcontroller</li><li>the SD card and the LED flash hinder each other a bit because they both run on the same pins (yup). But I think we managed to get everything working by relying on the 1-bit mode of the SD card (slower, but more stable); also important: Initialize the SD card before any GPIO assignment (i.e. in <code>setup()</code>)</li><li>The same code could also be used in an incubator-contained micoroscope, for example, to observe the growth of cells. But for this it would be important to keep the Wifi stream running :)</li></ul><h1>Videos</h1><p>That&#x27;s the software for the Matchboxscope:</p><img loading="lazy" src="IMAGES/SVID_20220607_114724_1.gif" width="300" class="img_ev3q"><p>And a more in-detail tutorial on how to use the software:</p><img loading="lazy" src="IMAGES/screenshotYT.png" width="500" class="img_ev3q">[Youtube LINK](https://youtu.be/Gy-_bQiS_Xs)<h2 class="anchor anchorWithStickyNavbar_LWe7" id="get-involved">Get Involved<a class="hash-link" href="#get-involved" title="Direct link to heading">â€‹</a></h2><p>This project is open so that anyone can get involved. You don&#x27;t even have to learn CAD designing or programming. Find ways you can contribute in  <a href="https://github.com/openUC2/UC2-GIT/blob/master/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer">CONTRIBUTING</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="license-and-collaboration">License and Collaboration<a class="hash-link" href="#license-and-collaboration" title="Direct link to heading">â€‹</a></h2><p>This project is open-source and is released under the CERN open hardware license. Our aim is to make the kits commercially available.
We encourage everyone who is using our Toolbox to share their results and ideas, so that the Toolbox keeps improving. It should serve as a easy-to-use and easy-to-access general purpose building block solution for the area of STEAM education. All the design files are generally for free, but we would like to hear from you how is it going.</p><p>You&#x27;re free to fork the project and enhance it. If you have any suggestions to improve it or add any additional functions make a pull-request or file an issue.</p><p>Please find the type of licenses <a href="https://github.com/openUC2/UC2-GIT/blob/master/License.md" target="_blank" rel="noopener noreferrer">here</a></p><p>REMARK: All files have been designed using Autodesk Inventor 2019 (EDUCATION)</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="collaborating">Collaborating<a class="hash-link" href="#collaborating" title="Direct link to heading">â€‹</a></h2><p>If you find this project useful, please like this repository, follow us on Twitter and cite the webpage! :-)</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/WebSERIAL"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">WebSERIAL</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-to-install" class="table-of-contents__link toc-highlight">How to install</a></li><li><a href="#anglerfish-code" class="table-of-contents__link toc-highlight">Anglerfish Code</a></li><li><a href="#get-involved" class="table-of-contents__link toc-highlight">Get Involved</a></li><li><a href="#license-and-collaboration" class="table-of-contents__link toc-highlight">License and Collaboration</a></li><li><a href="#collaborating" class="table-of-contents__link toc-highlight">Collaborating</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://openuc2.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discourse<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/beniroquai" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/matchboxscope/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 Matchboxscope Developers.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.2e67f1ff.js"></script>
<script src="/assets/js/main.e05a71f8.js"></script>
</body>
</html>